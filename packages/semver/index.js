"use strict";
/**
 * Created by user on 2019/3/29.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const moment = require("moment");
/**
 * create a idea style semver (190.1.329002)
 * 自動生成類似 IDEA 的版本編號風格
 */
function date(old, options = {}) {
    let now = moment();
    let patch = 1;
    let major = options.major | 0;
    let minor = options.minor | 0;
    let style = options.style;
    if (style == null) {
        style = 1 /* IDEA */;
    }
    let _v1 = date.parse(old, options);
    if (!major && _v1) {
        major = _v1[4] | 0;
    }
    if (!minor && _v1) {
        minor = _v1[5] | 0;
    }
    let _v2;
    let timestamp = options.timestamp;
    if (typeof timestamp === 'string') {
        _v2 = date.parse(timestamp, options);
        if (_v2) {
            timestamp = [_v2[0], _v2[1] - 1, _v2[2]];
            if (!major) {
                major = _v2[4] | 0;
            }
            if (!minor) {
                minor = _v2[5] | 0;
            }
        }
    }
    timestamp = moment(timestamp || now);
    if (!timestamp.isValid()) {
        throw new RangeError(`timestamp not a valid date: ${timestamp}`);
    }
    if (_v1) {
        if (!_v2) {
            _v2 = [timestamp.year(), timestamp.month() + 1, timestamp.date(), 0, major, minor];
        }
        if (_v1[0] === _v2[0] && _v1[1] === _v2[1] && _v1[2] === _v2[2]) {
            patch = Math.max(_v2[3], _v1[3], 1) + 1;
        }
        else if (_v2[3]) {
            patch = Math.max(_v2[3], 1) + 1;
        }
    }
    let year = timestamp.year();
    if (year > 2099 || year < 2010) {
        throw new RangeError(`year must in [2010-2099]: ${year}`);
    }
    let yf = style ? `YY` : `YYYY`;
    major = String(major || 0).padStart(options.padZero, '0');
    patch = String(patch).padStart(options.padZeroPatch || 3, '0');
    return timestamp.format(`${yf}${major}.${minor}.MDD${patch}`);
}
exports.date = date;
(function (date_1) {
    function parse(version, options = {}) {
        if (typeof version === 'string') {
            let style = options.style;
            if (style == null) {
                style = 1 /* IDEA */;
            }
            let arr;
            let re = new RegExp(`^(\\d{${style ? 2 : 4}})(\\d*)\\.(\\d+)(?:\\.(1[012]|[1-9])(?:(\\d{2})(\\d*?))?)?$`);
            if (version.match(re)) {
                // @ts-ignore
                arr = [RegExp.$1, RegExp.$4, RegExp.$5, RegExp.$6, RegExp.$2, RegExp.$3];
                if (style) {
                    arr[0] = (arr[0] | 0) + 2000;
                }
            }
            if (arr) {
                // @ts-ignore
                arr = arr.map(v => v | 0);
                let [year, month, date, patch, major, minor] = arr;
                if (year > 2099 || year < 2010) {
                    throw new RangeError(`year must in [2010-2099]: ${year}`);
                }
                return Object.assign(arr, {
                    year, month, date, patch, major, minor,
                });
            }
        }
        return null;
    }
    date_1.parse = parse;
})(date = exports.date || (exports.date = {}));
exports.default = date;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsaUNBQWtDO0FBb0NsQzs7O0dBR0c7QUFDSCxTQUFnQixJQUFJLENBQUMsR0FBWSxFQUFFLFVBQW9CLEVBQUU7SUFFeEQsSUFBSSxHQUFHLEdBQUcsTUFBTSxFQUFFLENBQUM7SUFDbkIsSUFBSSxLQUFLLEdBQW9CLENBQUMsQ0FBQztJQUMvQixJQUFJLEtBQUssR0FBcUIsT0FBTyxDQUFDLEtBQWdCLEdBQUcsQ0FBQyxDQUFDO0lBQzNELElBQUksS0FBSyxHQUFxQixPQUFPLENBQUMsS0FBZ0IsR0FBRyxDQUFDLENBQUM7SUFFM0QsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztJQUUxQixJQUFJLEtBQUssSUFBSSxJQUFJLEVBQ2pCO1FBQ0MsS0FBSyxlQUEyQixDQUFDO0tBQ2pDO0lBRUQsSUFBSSxHQUFHLEdBQXNCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRXRELElBQUksQ0FBQyxLQUFLLElBQUksR0FBRyxFQUNqQjtRQUNDLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ25CO0lBRUQsSUFBSSxDQUFDLEtBQUssSUFBSSxHQUFHLEVBQ2pCO1FBQ0MsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbkI7SUFFRCxJQUFJLEdBQXNCLENBQUM7SUFFM0IsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztJQUVsQyxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFDakM7UUFDQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFckMsSUFBSSxHQUFHLEVBQ1A7WUFDQyxTQUFTLEdBQUcsQ0FBQyxH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RWdCLElBQUksR0FBSixZQUFJLEtBQUosWUFBSSxRQXdFcEI7QUFFRCxrQkFBZSxJQUFJLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE5LzMvMjkuXG4gKi9cblxuaW1wb3J0IG1vbWVudCA9IHJlcXVpcmUoXCJtb21lbnRcIik7XG5cbmV4cG9ydCBjb25zdCBlbnVtIEVudW1TZW12ZXJEYXRlU3R5bGVcbntcblx0LyoqXG5cdCAqIGRhdGUgc3R5bGUgc2VtdmVyICgyMDE5MC4xLjMyOTAwMilcblx0ICovXG5cdFlFQVIgPSAwLFxuXHQvKipcblx0ICogaWRlYSBzdHlsZSBzZW12ZXIgKDE5MC4xLjMyOTAwMilcblx0ICovXG5cdElERUEgPSAxXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU9wdGlvbnNcbntcblx0dGltZXN0YW1wPzogbW9tZW50Lk1vbWVudElucHV0IHwgbW9tZW50Lk1vbWVudCxcblx0LyoqXG5cdCAqIG1ham9yIHZlcnNpb25cblx0ICovXG5cdG1ham9yPzogbnVtYmVyIHwgc3RyaW5nLFxuXHQvKipcblx0ICogbWlub3IgdmVyc2lvblxuXHQgKi9cblx0bWlub3I/OiBudW1iZXIgfCBzdHJpbmcsXG5cdC8qKlxuXHQgKiBwYWRaZXJvIGZvciBtYWpvclxuXHQgKi9cblx0cGFkWmVybz86IG51bWJlcjtcblx0cGFkWmVyb1BhdGNoPzogbnVtYmVyO1xuXHQvKipcblx0ICogb3V0cHV0IHN0eWxlXG5cdCAqL1xuXHRzdHlsZT86IEVudW1TZW12ZXJEYXRlU3R5bGVcbn1cblxuLyoqXG4gKiBjcmVhdGUgYSBpZGVhIHN0eWxlIHNlbXZlciAoMTkwLjEuMzI5MDAyKVxuICog6Ieq5YuV55Sf5oiQ6aGe5Ly8IElERUEg55qE54mI5pys57eo6Jmf6aKo5qC8XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXRlKG9sZD86IHN0cmluZywgb3B0aW9uczogSU9wdGlvbnMgPSB7fSlcbntcblx0bGV0IG5vdyA9IG1vbWVudCgpO1xuXHRsZXQgcGF0Y2g6IHN0cmluZyB8IG51bWJlciA9IDE7XG5cdGxldCBtYWpvcjogc3RyaW5nIHwgbnVtYmVyID0gKG9wdGlvbnMubWFqb3IgYXMgbnVtYmVyKSB8IDA7XG5cdGxldCBtaW5vcjogc3RyaW5nIHwgbnVtYmVyID0gKG9wdGlvbnMubWlub3IgYXMgbnVtYmVyKSB8IDA7XG5cblx0bGV0IHN0eWxlID0gb3B0aW9ucy5zdHlsZTtcblxuXHRpZiAoc3R5bGUgPT0gbnVsbClcblx0e1xuXHRcdHN0eWxlID0gRW51bVNlbXZlckRhdGVTdHlsZS5JREVBO1xuXHR9XG5cblx0bGV0IF92MTogZGF0ZS5JUGFyc2VSZXR1cm4gPSBkYXRlLnBhcnNlKG9sZCwgb3B0aW9ucyk7XG5cblx0aWYgKCFtYWpvciAmJiBfdjEpXG5cdHtcblx0XHRtYWpvciA9IF92MVs0XSB8IDA7XG5cdH1cblxuXHRpZiAoIW1pbm9yICYmIF92MSlcblx0e1xuXHRcdG1pbm9yID0gX3YxWzVdIHwgMDtcblx0fVxuXG5cdGxldCBfdjI6IGRhdGUuSVBhcnNlUmV0dXJuO1xuXG5cdGxldCB0aW1lc3RhbXAgPSBvcHRpb25zLnRpbWVzdGFtcDtcblxuXHRpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ3N0cmluZycpXG5cdHtcblx0XHRfdjIgPSBkYXRlLnBhcnNlKHRpbWVzdGFtcCwgb3B0aW9ucyk7XG5cblx0XHRpZiAoX3YyKVxuXHRcdHtcblx0XHRcdHRpbWVzdGFtcCA9IFtfdjJbMF0sIF92MlsxXSAtIDEsIF92MlsyXV07XG5cblx0XHRcdGlmICghbWFqb3IpXG5cdFx0XHR7XG5cdFx0XHRcdG1ham9yID0gX3YyWzRdIHwgMDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFtaW5vcilcblx0XHRcdHtcblx0XHRcdFx0bWlub3IgPSBfdjJbNV0gfCAwO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHRpbWVzdGFtcCA9IG1vbWVudCh0aW1lc3RhbXAgfHwgbm93KSBhcyBtb21lbnQuTW9tZW50O1xuXG5cdGlmICghdGltZXN0YW1wLmlzVmFsaWQoKSlcblx0e1xuXHRcdHRocm93IG5ldyBSYW5nZUVycm9yKGB0aW1lc3RhbXAgbm90IGEgdmFsaWQgZGF0ZTogJHt0aW1lc3RhbXB9YCk7XG5cdH1cblxuXHRpZiAoX3YxKVxuXHR7XG5cdFx0aWYgKCFfdjIpXG5cdFx0e1xuXHRcdFx0X3YyID0gW3RpbWVzdGFtcC55ZWFyKCksIHRpbWVzdGFtcC5tb250aCgpICsgMSwgdGltZXN0YW1wLmRhdGUoKSwgMCwgbWFqb3IsIG1pbm9yXTtcblx0XHR9XG5cblx0XHRpZiAoX3YxWzBdID09PSBfdjJbMF0gJiYgX3YxWzFdID09PSBfdjJbMV0gJiYgX3YxWzJdID09PSBfdjJbMl0pXG5cdFx0e1xuXHRcdFx0cGF0Y2ggPSBNYXRoLm1heChfdjJbM10sIF92MVszXSwgMSkgKyAxO1xuXHRcdH1cblx0XHRlbHNlIGlmIChfdjJbM10pXG5cdFx0e1xuXHRcdFx0cGF0Y2ggPSBNYXRoLm1heChfdjJbM10sIDEpICsgMTtcblx0XHR9XG5cdH1cblxuXHRsZXQgeWVhciA9IHRpbWVzdGFtcC55ZWFyKCk7XG5cblx0aWYgKHllYXIgPiAyMDk5IHx8IHllYXIgPCAyMDEwKVxuXHR7XG5cdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoYHllYXIgbXVzdCBpbiBbMjAxMC0yMDk5XTogJHt5ZWFyfWApO1xuXHR9XG5cblx0bGV0IHlmID0gc3R5bGUgPyBgWVlgIDogYFlZWVlgO1xuXG5cdG1ham9yID0gU3RyaW5nKG1ham9yIHx8IDApLnBhZFN0YXJ0KG9wdGlvbnMucGFkWmVybywgJzAnKTtcblx0cGF0Y2ggPSBTdHJpbmcocGF0Y2gpLnBhZFN0YXJ0KG9wdGlvbnMucGFkWmVyb1BhdGNoIHx8IDMsICcwJyk7XG5cblx0cmV0dXJuIHRpbWVzdGFtcC5mb3JtYXQoYCR7eWZ9JHttYWpvcn0uJHttaW5vcn0uTUREJHtwYXRjaH1gKVxufVxuXG5leHBvcnQgbmFtZXNwYWNlIGRhdGVcbntcblx0ZXhwb3J0IHR5cGUgSVBhcnNlUmV0dXJuQXJyYXkgPSBbbnVtYmVyIC8qeWVhciovLCBudW1iZXIgLyptb250aCovLCBudW1iZXIgLypkYXRlKi8sIG51bWJlciAvKnBhdGNoKi8sIG51bWJlciAvKm1ham9yKi8sIG51bWJlciAvKm1pbm9yKi9dO1xuXHRleHBvcnQgaW50ZXJmYWNlIElQYXJzZVJldHVybk9iamVjdFxuXHR7XG5cdFx0LyoqXG5cdFx0ICogWVlZWSBvbmx5IGFsbG93IFsyMDEwLTIwOTldXG5cdFx0ICovXG5cdFx0eWVhcjogbnVtYmVyLFxuXHRcdC8qKlxuXHRcdCAqIE0sIGlmIHVzZSBmb3IgbW9tZW50IG5lZWQgLTFcblx0XHQgKi9cblx0XHRtb250aDogbnVtYmVyLFxuXHRcdC8qKlxuXHRcdCAqIERcblx0XHQgKi9cblx0XHRkYXRlOiBudW1iZXIsXG5cblx0XHRwYXRjaDogbnVtYmVyLFxuXHRcdG1ham9yOiBudW1iZXIsXG5cdFx0bWlub3I6IG51bWJlcixcblx0fVxuXG5cdGV4cG9ydCB0eXBlIElQYXJzZVJldHVybiA9IElQYXJzZVJldHVybkFycmF5IHwgSVBhcnNlUmV0dXJuQXJyYXkgJiBJUGFyc2VSZXR1cm5PYmplY3Q7XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKHZlcnNpb246IHN0cmluZyxcblx0XHRvcHRpb25zOiBJT3B0aW9ucyA9IHt9LFxuXHQpOiBJUGFyc2VSZXR1cm5cblx0e1xuXHRcdGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ3N0cmluZycpXG5cdFx0e1xuXHRcdFx0bGV0IHN0eWxlID0gb3B0aW9ucy5zdHlsZTtcblxuXHRcdFx0aWYgKHN0eWxlID09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHN0eWxlID0gRW51bVNlbXZlckRhdGVTdHlsZS5JREVBO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgYXJyOiBJUGFyc2VSZXR1cm47XG5cdFx0XHRsZXQgcmUgPSBuZXcgUmVnRXhwKGBeKFxcXFxkeyR7c3R5bGUgPyAyIDogNH19KShcXFxcZCopXFxcXC4oXFxcXGQrKSg/OlxcXFwuKDFbMDEyXXxbMS05XSkoPzooXFxcXGR7Mn0pKFxcXFxkKj8pKT8pPyRgKTtcblxuXHRcdFx0aWYgKHZlcnNpb24ubWF0Y2gocmUpKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGFyciA9IFtSZWdFeHAuJDEsIFJlZ0V4cC4kNCwgUmVnRXhwLiQ1LCBSZWdFeHAuJDYsIFJlZ0V4cC4kMiwgUmVnRXhwLiQzXVxuXG5cdFx0XHRcdGlmIChzdHlsZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGFyclswXSA9IChhcnJbMF0gfCAwKSArIDIwMDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGFycilcblx0XHRcdHtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRhcnIgPSBhcnIubWFwKHYgPT4gKHYgYXMgYW55KSB8IDApO1xuXG5cdFx0XHRcdGxldCBbeWVhciwgbW9udGgsIGRhdGUsIHBhdGNoLCBtYWpvciwgbWlub3JdID0gYXJyO1xuXG5cdFx0XHRcdGlmICh5ZWFyID4gMjA5OSB8fCB5ZWFyIDwgMjAxMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRocm93IG5ldyBSYW5nZUVycm9yKGB5ZWFyIG11c3QgaW4gWzIwMTAtMjA5OV06ICR7eWVhcn1gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKGFyciwge1xuXHRcdFx0XHRcdHllYXIsIG1vbnRoLCBkYXRlLCBwYXRjaCwgbWFqb3IsIG1pbm9yLFxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRhdGVcbiJdfQ==